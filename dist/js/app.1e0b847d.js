(function(e){function t(t){for(var r,o,s=t[0],c=t[1],l=t[2],f=0,d=[];f<s.length;f++)o=s[f],a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("64a9"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf"),n("0cdd");var r=n("2b0e"),a=n("5f5b");n("ab8b"),n("2dd8");r["default"].use(a["a"]);var i=n("59ca"),o=n.n(i),s=(n("e71f"),n("ea7b"),n("ecee")),c=n("c074"),l=n("ad3d"),u=n("bc3a"),f=n.n(u),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{id:"app"}},[r("b-row",{staticClass:"mb-3 mt-3",staticStyle:{"border-bottom":"3px solid #3e8ee4"}},[r("b-col",{staticClass:"text-left mb-2 pr-5",attrs:{col:"",sm:"12",md:"3"}},[r("img",{attrs:{alt:"Vue logo",src:n("cf05"),width:"40px"}}),e._v("   \n      "),r("h4",{staticStyle:{display:"inline"}},[e._v("Small Pay")])]),r("b-col",{attrs:{id:"nav",col:"",sm:"9",md:"7"}},[r("b-nav",{attrs:{pills:""}},[r("b-nav-item",[r("router-link",{directives:[{name:"show",rawName:"v-show",value:e.currentUser,expression:"currentUser"}],attrs:{to:"/home"}},[r("font-awesome-icon",{attrs:{icon:"money-bill-alt"}}),e._v(" Home")],1)],1),r("b-nav-item",[r("router-link",{directives:[{name:"show",rawName:"v-show",value:e.currentUser,expression:"currentUser"}],attrs:{to:"/suppliers"}},[r("font-awesome-icon",{attrs:{icon:"truck-moving"}}),e._v(" Suppliers")],1)],1)],1)],1),r("b-col",{attrs:{id:"nav",col:"",sm:"3",md:"2"}},[r("b-nav",{staticClass:"text-right flush",attrs:{pills:""}},[r("b-nav-item",[r("a",{directives:[{name:"show",rawName:"v-show",value:e.currentUser,expression:"currentUser"}],attrs:{href:"#"},on:{click:function(t){return e.logOut()}}},[r("font-awesome-icon",{attrs:{icon:"sign-out-alt"}}),e._v(" Log Out")],1)])],1)],1)],1),r("b-row",[r("b-col",{attrs:{col:"",sm:"12"}},[r("router-view")],1)],1)],1)},m=[],b=n("2f62"),p="getBanksLocal",h="getRecipientsLocal",v="getCurrentUser",g="getCurrencies",_="setBanks",y="setRecipients",w="setCurrentUser";function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){D(e,t,n[t])})}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={methods:k({logOut:function(){var e=this;i["auth"]().signOut().then(function(){e[w](null),this.$router.push("/login")}).catch(function(e){alert(e)})}},Object(b["d"])([w])),computed:k({},Object(b["c"])({currentUser:v}))},P=O,j=(n("034f"),n("2877")),x=Object(j["a"])(P,d,m,!1,null,null,null),N=x.exports,C=n("8c4f"),S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-row",{staticClass:"mb-2"},[n("b-col",{staticClass:"text-left",attrs:{col:"",sm:"6"}},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-disbursement",modifiers:{"modal-disbursement":!0}}],attrs:{variant:"primary"}},[n("font-awesome-icon",{attrs:{icon:"plus-square"}}),e._v(" New Disbursement")],1)],1),n("b-col",{staticClass:"text-right",attrs:{col:"",sm:"6"}},[n("span",[n("font-awesome-icon",{attrs:{icon:"balance-scale"}}),e._v(" Current Balance:\n        "),n("strong",[e._v(e._s(e.balance))])],1)])],1),n("b-row",[n("b-col",{staticClass:"text-left",attrs:{col:"",sm:"12"}},[n("b-tabs",{attrs:{"content-class":"mt-3",justified:""}},[n("b-tab",{attrs:{title:"Pending",active:""}},[n("b-table",{attrs:{striped:"",hover:"",items:e.pendingDisbursements,fields:e.fields},scopedSlots:e._u([{key:"actions",fn:function(t){return[t.item.transfer_data.transfer_code?e._e():n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Initiate Transfer"}},[n("font-awesome-icon",{attrs:{icon:"play"},on:{click:function(n){return e.initiateTransfer(t)}}}),e._v(" \n              ")],1),t.item.transfer_data.transfer_code?e._e():n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Edit Disbursement"}},[n("font-awesome-icon",{attrs:{icon:"edit"},on:{click:function(n){return e.editDisbursement(t.item)}}}),e._v(" \n              ")],1),t.item.transfer_data.transfer_code?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Re-Initiate Transfer"}},[n("font-awesome-icon",{attrs:{icon:"recycle"},on:{click:function(n){return e.initiateTransfer(t)}}}),e._v(" \n              ")],1):e._e(),t.item.transfer_data.transfer_code&&"otp"==t.item.transfer_data.status?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Resend Transfer OTP"}},[n("font-awesome-icon",{attrs:{icon:"paper-plane"},on:{click:function(n){return e.resendOTP(t.item.transfer_data.transfer_code)}}}),e._v(" \n              ")],1):e._e(),t.item.transfer_data.transfer_code&&"otp"==t.item.transfer_data.status?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Finalize Transfer"}},[n("font-awesome-icon",{attrs:{icon:"stamp"},on:{click:function(n){return e.processOTP(t)}}}),e._v(" \n              ")],1):e._e(),t.item.transfer_data.transfer_code?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Verify Transfer"}},[n("font-awesome-icon",{attrs:{icon:"check-double"},on:{click:function(n){return e.verifyTransfer(t.item)}}}),e._v(" \n              ")],1):e._e(),n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Delete Disbursement"}},[n("font-awesome-icon",{attrs:{icon:"trash-alt"},on:{click:function(n){return e.deleteDisbursement(t.item)}}}),e._v(" \n              ")],1)]}}])})],1),n("b-tab",{attrs:{title:"Paid"}},[n("b-table",{attrs:{striped:"",hover:"",items:e.paidDisbursements,fields:e.fieldsPaid},scopedSlots:e._u([{key:"transfer_data.updatedAt",fn:function(t){return[e._v(e._s(e._f("date")(t.item.transfer_data.updatedAt)))]}}])})],1)],1)],1)],1),n("b-modal",{attrs:{id:"modal-disbursement",title:(e.form.update?"Edit":"New")+"  Disbursement"}},[n("b-form",[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",[n("b-form-group",{attrs:{id:"input-group-2",label:"Invoice Number:","label-for":"invoice_number"}},[n("b-form-input",{attrs:{id:"invoice_number",maxlength:"20",required:"",placeholder:"Invoice Number"},model:{value:e.form.invoice_number,callback:function(t){e.$set(e.form,"invoice_number",t)},expression:"form.invoice_number"}})],1)],1),n("b-col",[n("b-form-group",{attrs:{id:"input-group-1",label:"Invoice Date:","label-for":"invoice_date"}},[n("b-form-input",{attrs:{id:"invoice_date",type:"date",required:"",placeholder:"Invoice Date"},model:{value:e.form.invoice_date,callback:function(t){e.$set(e.form,"invoice_date",t)},expression:"form.invoice_date"}})],1)],1)],1),n("b-row",[n("b-col",[n("b-form-group",{attrs:{id:"input-group-5",label:"Supplier:","label-for":"recipient",description:e.accountInfo(e.form.recipient)}},[n("b-form-select",{attrs:{id:"recipient",options:e.recipients,"text-field":"name","value-field":"recipient_code",required:""},model:{value:e.form.recipient,callback:function(t){e.$set(e.form,"recipient",t)},expression:"form.recipient"}})],1)],1)],1),n("b-row",[n("b-col",[n("b-form-group",{attrs:{id:"input-group-3",label:"Amount:","label-for":"amount"}},[n("b-form-input",{attrs:{id:"amount",required:"",type:"number",min:"1",placeholder:"Amount to Pay"},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}})],1)],1),n("b-col",[n("b-form-group",{attrs:{id:"input-group-4",label:"Currency:","label-for":"currency"}},[n("b-form-select",{attrs:{id:"currency",options:e.currencies,required:""},model:{value:e.form.currency,callback:function(t){e.$set(e.form,"currency",t)},expression:"form.currency"}})],1)],1)],1),n("b-row",[n("b-col",[n("b-form-group",{attrs:{id:"input-group-7",label:"Purpose:","label-for":"reason"}},[n("b-form-input",{attrs:{id:"reason",required:"",min:"1",placeholder:"Purpose of Payment"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)],1)],1)],1)],1),n("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-button",{staticClass:"float-left",attrs:{variant:"secondary"},on:{click:function(t){return e.cancelDialog()}}},[n("font-awesome-icon",{attrs:{icon:"window-close"}}),e._v("  \n        Close")],1),e.form.update?e._e():n("b-button",{staticClass:"float-right ml-1",attrs:{variant:"primary",disabled:e.loading||!(e.form.amount&&e.form.currency&&e.form.recipient&&e.form.reason)},on:{click:function(t){return e.createDisbursement(e.form)}}},[n("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" \n      Save Disbursement")],1),e.form.update?n("b-button",{staticClass:"float-right ml-1",attrs:{variant:"primary",disabled:e.loading||!(e.form.amount&&e.form.currency&&e.form.recipient&&e.form.reason)},on:{click:function(t){return e.updateDisbursement(e.form)}}},[n("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" \n      Update Disbursement")],1):e._e()],1)],1),n("b-modal",{attrs:{id:"modal-otp",title:"Finalize Payment"}},[n("b-form",{attrs:{"inline-block":""}},[n("b-form-group",{attrs:{id:"input-group-2",label:"Invoice Number:","label-for":"invoice_number"}},[n("b-form-input",{attrs:{id:"invoice_number",maxlength:"20",readonly:"",placeholder:"Invoice Number"},model:{value:e.currentDisbursement.invoice_number,callback:function(t){e.$set(e.currentDisbursement,"invoice_number",t)},expression:"currentDisbursement.invoice_number"}})],1),n("b-form-group",{attrs:{id:"input-group-5",label:"Supplier:","label-for":"recipient",description:e.accountInfo(e.currentDisbursement.recipient)}},[n("b-form-select",{attrs:{id:"recipient",options:e.recipients,"text-field":"name","value-field":"recipient_code",disabled:""},model:{value:e.currentDisbursement.recipient,callback:function(t){e.$set(e.currentDisbursement,"recipient",t)},expression:"currentDisbursement.recipient"}})],1),n("b-form-group",{attrs:{id:"input-group-4",label:"Currency:","label-for":"currency"}},[n("b-form-select",{attrs:{id:"currency",options:e.currencies,disabled:""},model:{value:e.currentDisbursement.currency,callback:function(t){e.$set(e.currentDisbursement,"currency",t)},expression:"currentDisbursement.currency"}})],1),n("b-form-group",{attrs:{id:"input-group-3",label:"Amount:","label-for":"amount"}},[n("b-form-input",{attrs:{id:"amount",readonly:"",type:"number",min:"1",placeholder:"Amount to Pay"},model:{value:e.currentDisbursement.amount,callback:function(t){e.$set(e.currentDisbursement,"amount",t)},expression:"currentDisbursement.amount"}})],1),n("b-form-group",{attrs:{id:"input-group-7",label:"OTP:","label-for":"otp"}},[n("b-form-input",{attrs:{id:"otp",required:"",min:"1",placeholder:"OTP"},model:{value:e.currentDisbursement.otp,callback:function(t){e.$set(e.currentDisbursement,"otp",t)},expression:"currentDisbursement.otp"}})],1)],1),n("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-button",{staticClass:"float-left",attrs:{variant:"secondary"},on:{click:function(t){return e.cancelDialog()}}},[n("font-awesome-icon",{attrs:{icon:"window-close"}}),e._v("  \n        Close")],1),n("b-button",{staticClass:"float-right ml-1",attrs:{variant:"primary",disabled:e.loading},on:{click:function(t){return e.finalizeTransfer(e.currentDisbursement)}}},[n("font-awesome-icon",{attrs:{icon:"stamp"}}),e._v(" \n      Finalize Transfer")],1)],1)],1)],1)},T=[],$="getBanks",A="verifyAccount",E="createRecipient",I="getRecipients",B="getBalance",q="getInitialTransfer",F="getFinalizeTransfer",M="getVerifyTransfer",R="resendTransferOTP",U="deleteRecipient",L="updateRecipient",z="getRecipientLocal";function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){V(e,t,n[t])})}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G={name:"home",data:function(){return{form:{recipient:null,invoice_date:null,amount:null,currency:"NGN",invoice_number:null,reason:null,transfer_data:{},createdby:null,paidby:null,update:!1},balance:"",currentDisbursement:{},paidDisbursements:[],pendingDisbursements:[],loading:!1,fields:[{key:"invoice_number",label:"Invoice No.",sortable:!0},{key:"invoice_date",label:"Invoice Date",sortable:!0},{key:"recipient_obj.name",label:"Supplier",sortable:!0},{key:"recipient_obj.details.bank_name",label:"Bank",sortable:!0},{key:"recipient_obj.details.account_name",label:"Account Name",sortable:!0},{key:"recipient_obj.details.account_number",label:"Account Number",sortable:!0},{key:"reason",label:"Purpose",sortable:!0},{key:"amount",label:"Amount",sortable:!0,class:"numeric",formatter:function(e){return parseFloat(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}},{key:"transfer_data.status",label:"Transfer Status",sortable:!0},{key:"actions",label:"Actions",sortable:!1}],fieldsPaid:[{key:"transfer_data.updatedAt",label:"Transfer Date",sortable:!0},{key:"invoice_number",label:"Invoice No.",sortable:!0},{key:"invoice_date",label:"Invoice Date",sortable:!0},{key:"recipient_obj.name",label:"Supplier",sortable:!0},{key:"recipient_obj.details.bank_name",label:"Bank",sortable:!0},{key:"recipient_obj.details.account_name",label:"Account Name",sortable:!0},{key:"recipient_obj.details.account_number",label:"Account Number",sortable:!0},{key:"reason",label:"Purpose",sortable:!0},{key:"amount",label:"Amount",sortable:!0,class:"numeric",formatter:function(e){return parseFloat(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}}]}},computed:J({},Object(b["c"])({recipients:h,currencies:g,user:v})),methods:J({cancelDialog:function(){this.form={recipient:null,invoice_date:null,amount:null,currency:"NGN",invoice_number:null,reason:null,transfer_data:{},createdby:"",paidby:"",update:!1},this.$bvModal.hide("modal-disbursement"),this.$bvModal.hide("modal-otp")},accountInfo:function(e){return this.getClientAccount(e)},getClients:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.recipients.length&&!t||this[I]().then(function(t){e[y](t.data.data)}).catch(function(e){alert(e.response.data.message)})},getClientAccount:function(e){var t="";if(!e)return t;var n=this.recipients.find(function(t){return t.recipient_code==e});return n&&(t="".concat(n.details.account_name," (").concat(n.details.bank_name," - ").concat(n.details.account_number,")")),t},getClient:function(e){var t={};if(!e)return t;var n=this.recipients.find(function(t){return t.recipient_code==e});return n||t},createDisbursement:function(e){var t=this;this.loading=!0,e.createdby=this.user.email,e.recipient_obj=this.getClient(e.recipient),e.status="Pending",ke.collection(we).add(e).then(function(){alert("Disbursement successfully saved!"),t.cancelDialog(),t.listPendingDisbursements(),t.loading=!1}).catch(function(e){alert("There was an error saving disbursement: "+e),t.loading=!1})},listPaidDisbursements:function(){var e=this;this.paidDisbursements=[],ke.collection(we).where("status","==","Paid").orderBy("transfer_data.updatedAt","desc").get().then(function(t){t.forEach(function(t){e.paidDisbursements.push(Object.assign({id:t.id},t.data()))})})},listPendingDisbursements:function(){var e=this;this.pendingDisbursements=[],ke.collection(we).where("status","==","Pending").orderBy("invoice_date").orderBy("invoice_number").get().then(function(t){t.forEach(function(t){e.pendingDisbursements.push(Object.assign({id:t.id},t.data()))})})},getBalanceLocal:function(){var e=this;this[B]().then(function(t){e.balance=t.data.data[0].currency+e.$options.filters.money(t.data.data[0].balance/100)}).catch(function(e){alert("Error Getting balance: "+e.response.data.message)})},initiateTransfer:function(e){var t=this,n={amount:parseInt(100*e.item.amount),currency:e.item.currency,reason:e.item.reason,recipient:e.item.recipient,source:"balance",reference:(new Date).getTime()};this[q](n).then(function(n){return e.item.transfer_data=n.data.data,e.item.paidby=t.user.email,ke.collection(we).doc(e.item.id).set(e.item)}).then(function(){t.processOTP(e)}).catch(function(e){alert("Error Initiating transfer: "+e)})},processOTP:function(e){this.currentDisbursement=e.item,this.$bvModal.show("modal-otp")},finalizeTransfer:function(e){var t=this,n={transfer_code:e.transfer_data.transfer_code,otp:e.otp};this[F](n).then(function(){t.verifyTransfer(e)}).catch(function(e){alert("Error Finalizing transfer: "+e.response.data.message)})},resendOTP:function(e){this[R]({transfer_code:e,reason:"transfer"}).then(function(e){alert(e.data.message)}).catch(function(e){alert("Error Resending OTP: "+e.response.data.message)})},verifyTransfer:function(e){var t=this;this[M](e.transfer_data.transfer_code).then(function(t){return e.transfer_data=t.data.data,e.transfer_data.status,"success"==e.transfer_data.status?(e.status="Paid",alert("Transfer completed successfully")):alert("Transfer is incomplete, status is "+t.data.data.status),ke.collection(we).doc(e.id).set(e)}).then(function(){t.currentDisbursement={},t.paidDisbursements=[],t.pendingDisbursements=[],t.getBalanceLocal(),t.listPendingDisbursements(),t.listPaidDisbursements(),t.$bvModal.hide("modal-otp")}).catch(function(e){alert("Error Verifying transfer: "+e.response.data.message)})},editDisbursement:function(e){this.form=JSON.parse(JSON.stringify(e)),this.form.update=!0,this.$bvModal.show("modal-disbursement")},updateDisbursement:function(e){var t=this;this.loading=!0,e.recipient_obj=this.getClient(e.recipient),ke.collection(we).doc(e.id).set(e).then(function(){t.pendingDisbursements=[],t.listPendingDisbursements(),t.cancelDialog(),alert("Disbursement successfully updated"),t.loading=!1}).catch(function(e){alert("Error Verifying transfer: "+e.response.data.message),t.loading=!1})},deleteDisbursement:function(e){var t=this;"success"!=e.transfer_data.status?confirm("Do you really want to delete this Disbursement?")&&ke.collection(we).doc(e.id).delete().then(function(){t.listPendingDisbursements(),alert("Disbursement successfully deleted!")}).catch(function(e){alert("Error Deleting Disbursement: "+e)}):alert("Paid Disbursement cannot be deleted!")},formatDate:function(e){if(null==e)return"";var t=function(e){return e<10?"0"+e:e};return t(e.getDate())+"/"+t(e.getMonth()+1)+"/"+e.getFullYear()}},Object(b["b"])([I,B,q,F,M,R]),Object(b["d"])([y])),filters:{money:function(e){return parseFloat(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},date:function(e){e=new Date(e);var t=function(e){return e<10?"0"+e:e};return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())}},mounted:function(){this.listPendingDisbursements(),this.listPaidDisbursements(),this.getClients(),this.getBalanceLocal()}},Y=G,H=(n("ee90"),Object(j["a"])(Y,S,T,!1,null,null,null)),K=H.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{staticClass:"text-left pt-5",attrs:{col:"",sm:"12",md:"6","offset-md":"3"}},[n("b-form",{on:{submit:e.onSubmit}},[n("b-form-group",{attrs:{id:"input-group-1",label:"Email address:","label-for":"email"}},[n("b-form-input",{attrs:{id:"email",type:"email",required:"",placeholder:"Enter email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),n("b-form-group",{attrs:{id:"input-group-2",label:"Password:","label-for":"password"}},[n("b-form-input",{attrs:{id:"password",type:"password",required:"",placeholder:"Enter password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),n("b-button",{attrs:{type:"submit",variant:"primary",disabled:e.loading}},[e._v("Login")])],1)],1)],1)],1)},Q=[];function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Z(e,t,n[t])})}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee={name:"login",data:function(){return{form:{email:"",password:""},loading:!1}},methods:X({onSubmit:function(){var e=this;this.loading=!0,i["auth"]().signInWithEmailAndPassword(this.form.email,this.form.password).then(function(){e.loading=!1,e[w](i["auth"]().currentUser),e.$router.replace("home")}).catch(function(t){alert(t.message),e.loading=!1})}},Object(b["d"])([w]))},te=ee,ne=Object(j["a"])(te,W,Q,!1,null,"544e43ab",null),re=ne.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-row",{staticClass:"mb-2"},[n("b-col",{staticClass:"text-left",attrs:{col:"",sm:"12"}},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-supplier",modifiers:{"modal-supplier":!0}}],attrs:{variant:"primary"}},[n("font-awesome-icon",{attrs:{icon:"plus-square"}}),e._v(" New Supplier\n      ")],1)],1)],1),n("b-row",[n("b-col",{staticClass:"text-left",attrs:{col:"",sm:"12"}},[n("b-table",{attrs:{striped:"",hover:"",items:e.recipients,fields:e.fields},scopedSlots:e._u([{key:"actions",fn:function(t){return[n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Edit Supplier"}},[n("font-awesome-icon",{attrs:{icon:"edit"},on:{click:function(n){return e.openEditDialog(t.item)}}}),e._v(" \n          ")],1),n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Delete Supplier"}},[n("font-awesome-icon",{attrs:{icon:"trash-alt"},on:{click:function(n){return e.deleteClient(t.item)}}}),e._v(" \n          ")],1)]}}])})],1)],1),n("b-modal",{attrs:{id:"modal-supplier",title:(e.form.update?"Edit":"New")+" Supplier"}},[n("b-form",[n("b-form-group",{attrs:{id:"input-group-1",label:"Name:","label-for":"name"}},[n("b-form-input",{attrs:{id:"name",maxlength:"150",required:"",placeholder:"Name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("b-form-group",{attrs:{id:"input-group-6",label:"Email:","label-for":"email",description:"Optional"}},[n("b-form-input",{attrs:{id:"email",maxlength:"100",type:"email",placeholder:"Email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),n("b-form-group",{attrs:{id:"input-group-2",label:"Account Number:","label-for":"accountnumber"}},[n("b-form-input",{attrs:{id:"accountnumber",maxlength:"10",minlength:"10",required:"",disabled:e.form.update,placeholder:"NUBAN Account Number"},model:{value:e.form.account_number,callback:function(t){e.$set(e.form,"account_number",t)},expression:"form.account_number"}})],1),n("b-form-group",{attrs:{id:"input-group-5",label:"Bank:","label-for":"bank"}},[n("b-form-select",{attrs:{id:"bank",options:e.banks,"text-field":"name","value-field":"code",required:"",disabled:e.form.update},model:{value:e.form.bank_code,callback:function(t){e.$set(e.form,"bank_code",t)},expression:"form.bank_code"}})],1),n("b-form-group",{attrs:{id:"input-group-4",label:"Currency:","label-for":"currency"}},[n("b-form-select",{attrs:{id:"currency",options:e.currencies,disabled:e.form.update,required:""},model:{value:e.form.currency,callback:function(t){e.$set(e.form,"currency",t)},expression:"form.currency"}})],1),n("b-form-group",{attrs:{id:"input-group-3",label:"Account Name:","label-for":"accountname"}},[n("b-form-input",{attrs:{id:"accountname",required:"",readonly:"",placeholder:"Account Name"},model:{value:e.form.account_name,callback:function(t){e.$set(e.form,"account_name",t)},expression:"form.account_name"}})],1)],1),n("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-button",{staticClass:"float-left",attrs:{variant:"secondary"},on:{click:function(t){return e.cancelDialog()}}},[n("font-awesome-icon",{attrs:{icon:"window-close"}}),e._v(" Close\n      ")],1),e.form.update?e._e():n("b-button",{staticClass:"float-right ml-1",attrs:{variant:"primary",disabled:e.loading||!e.form.account_name||!e.form.account_number||!e.form.bank_code||!e.form.currency||!e.form.name},on:{click:function(t){return e.createClient(e.form)}}},[n("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" Save Supplier\n      ")],1),e.form.update?n("b-button",{staticClass:"float-right ml-1",attrs:{variant:"primary",disabled:e.loading||!e.form.name},on:{click:function(t){return e.updateClient(e.form)}}},[n("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" Update Supplier\n      ")],1):e._e(),e.form.update?e._e():n("b-button",{staticClass:"float-right ml-1",attrs:{variant:"primary",disabled:e.loading||!e.form.account_number||!e.form.bank_code||!e.form.currency||!e.form.name},on:{click:function(t){return e.validateAccount(e.form)}}},[n("font-awesome-icon",{attrs:{icon:"user-check"}}),e._v(" Verifiy\n      ")],1)],1)],1)],1)},ie=[];function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){se(e,t,n[t])})}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce={name:"suppliers",data:function(){return{form:{account_number:null,name:null,currency:null,account_name:null,bank_code:null,email:null,update:!1},loading:!1,fields:[{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"details.account_name",label:"Account Name",sortable:!0},{key:"details.account_number",label:"Account Number",sortable:!0},{key:"details.bank_name",label:"Bank",sortable:!0},"currency",{key:"actions",label:"Actions",sortable:!1}]}},computed:oe({},Object(b["c"])({banks:p,recipients:h,currencies:g})),methods:oe({validateAccount:function(){var e=this;this.loading=!0,this[A](this.form).then(function(t){e.loading=!1,e.form.account_name=t.data.data.account_name}).catch(function(t){e.loading=!1,alert(t.response.data.message)})},createClient:function(){var e=this;this.loading=!0,this.form.description=this.form.name,this.form.metadata={type:"Supplier"},this.form.type="nuban",this[E](this.form).then(function(t){e.recipients.push(t.data.data),e.loading=!1,e.$bvModal.hide("modal-supplier")}).catch(function(t){e.loading=!1,alert(t.response.data.message)})},cancelDialog:function(){this.form={account_number:null,name:null,currency:"NGN",account_name:null,bank_code:null,email:null,update:!1},this.$bvModal.hide("modal-supplier")},getClients:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.recipients.length&&!t||this[I]().then(function(t){e[y](t.data.data)}).catch(function(e){alert(e.response.data.message)})},getBankList:function(){var e=this;this.banks.length||this[$]().then(function(t){e[_](t.data.data)}).catch(function(e){alert(e.response.data.message)})},deleteClient:function(e){var t=this;ke.collection(we).where("recipient","==",e.recipient_code).get().then(function(n){return n.docs.length?(alert("The Supplier cannot be deleted because it associated with ".concat(n.docs.length," disbursements")),!1):!!confirm("Do you really want to delete this Supplier?")&&t[U](e.recipient_code)}).then(function(e){e&&(t.getClients(!0),t.cancelDialog(),alert(e.data.message))}).catch(function(e){alert(e)})},openEditDialog:function(e){this.form={account_number:e.details.account_number,name:e.name,currency:e.currency,account_name:e.details.account_name,bank_code:e.details.bank_code,email:e.email,id:e.id},this.form.update=!0,this.$bvModal.show("modal-supplier")},updateClient:function(e){var t=this;this.loading=!0;var n={name:e.name,email:e.email,recipient_code:e.id};this[L](n).then(function(e){t.getClients(!0),alert(e.data.message),t.loading=!1,t.$bvModal.hide("modal-supplier")}).catch(function(e){t.loading=!1,alert(e.response.data.message)})}},Object(b["b"])([$,A,E,I,L,U]),Object(b["d"])([y,_])),mounted:function(){this.getBankList(),this.getClients()}},le=ce,ue=Object(j["a"])(le,ae,ie,!1,null,null,null),fe=ue.exports;r["default"].use(C["a"]);var de=new C["a"]({routes:[{path:"*",redirect:"/login"},{path:"/",redirect:"/login"},{path:"/login",name:"login",component:re,meta:{auth:!1}},{path:"/home",name:"home",component:K,meta:{auth:!0}},{path:"/suppliers",name:"suppliers",component:fe,meta:{auth:!0}}]});de.beforeEach(function(e,t,n){var r=e.matched.some(function(e){return e.meta.auth});r||n(),i["auth"]().onAuthStateChanged(function(t){t?t&&"/login"==e.path?n("/home"):n():n("login")})});var me,be,pe,he=de;function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r["default"].use(b["a"]);var ge=new b["a"].Store({state:{banks:[],recipients:[],currencies:[{text:"Nigerian Naira",value:"NGN"}],user:{}},mutations:(me={},ve(me,y,function(e,t){e.recipients=t}),ve(me,_,function(e,t){e.banks=t}),ve(me,w,function(e,t){localStorage.setItem(v,JSON.stringify(t)),e.user=t}),me),actions:(be={},ve(be,$,function(){return De.get("bank")}),ve(be,A,function(e,t){return De.get("bank/resolve?account_number=".concat(t.account_number,"&bank_code=").concat(t.bank_code))}),ve(be,E,function(e,t){return De.post("transferrecipient",t)}),ve(be,I,function(){return De.get("transferrecipient")}),ve(be,B,function(){return De.get("balance")}),ve(be,z,function(e,t){return t?e.state.recipients.find(function(e){e.recipient_code}):{}}),ve(be,q,function(e,t){return De.post("transfer",t)}),ve(be,F,function(e,t){return De.post("transfer/finalize_transfer",t)}),ve(be,M,function(e,t){return De.get("transfer/".concat(t))}),ve(be,R,function(e,t){return De.post("transfer/resend_otp",t)}),ve(be,L,function(e,t){return De.put("transferrecipient/".concat(t.recipient_code),t)}),ve(be,U,function(e,t){return De.delete("transferrecipient/".concat(t))}),be),getters:(pe={},ve(pe,h,function(e){return e.recipients}),ve(pe,p,function(e){return e.banks}),ve(pe,g,function(e){return e.currencies}),ve(pe,v,function(e){return e.user&&e.user.email||(e.user=JSON.parse(localStorage.getItem(v))),e.user}),pe)});n.d(t,"DISBURSEMENTS",function(){return we}),n.d(t,"FIRE_STORE",function(){return ke}),n.d(t,"API",function(){return De}),r["default"].config.productionTip=!1,s["c"].add(c["h"],c["i"],c["f"],c["b"],c["l"],c["e"],c["c"],c["m"],c["g"],c["k"],c["d"],c["n"],c["a"],c["j"],c["o"],c["p"]),r["default"].component("font-awesome-icon",l["a"]);var _e={apiKey:"AIzaSyCjRuJydBF1NIS5TbFt33iTcJqu37sesws",authDomain:"small-pay.firebaseapp.com",databaseURL:"https://small-pay.firebaseio.com",projectId:"small-pay",storageBucket:"small-pay.appspot.com",messagingSenderId:"358015626647",appId:"1:358015626647:web:37615a5860f1dbb9"};o.a.initializeApp(_e);var ye={};o.a.firestore().settings(ye);var we="disbursements",ke=o.a.firestore(),De=f.a.create({baseURL:"https://api.paystack.co/",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer sk_test_2b93e160b19241103569ab1372526a91575e0a1f"},withCredentials:!1});new r["default"]({router:he,store:ge,render:function(e){return e(N)}}).$mount("#app")},"64a9":function(e,t,n){},ace0:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},ee90:function(e,t,n){"use strict";var r=n("ace0"),a=n.n(r);a.a}});
//# sourceMappingURL=app.1e0b847d.js.map